{"ast":null,"code":"import _asyncToGenerator from \"/home/digifemmes-22lab149/Bureau/soutramoi_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { WebPlugin } from '@capacitor/core';\nexport class FilePickerWeb extends WebPlugin {\n  constructor() {\n    super(...arguments);\n    this.ERROR_PICK_FILE_CANCELED = 'pickFiles canceled.';\n  }\n  pickFiles(options) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const pickedFiles = yield _this.openFilePicker(options);\n      if (!pickedFiles) {\n        throw new Error(_this.ERROR_PICK_FILE_CANCELED);\n      }\n      const result = {\n        files: []\n      };\n      for (const pickedFile of pickedFiles) {\n        const file = {\n          path: undefined,\n          name: _this.getNameFromUrl(pickedFile),\n          mimeType: _this.getMimeTypeFromUrl(pickedFile),\n          size: _this.getSizeFromUrl(pickedFile),\n          blob: pickedFile\n        };\n        if ((options === null || options === void 0 ? void 0 : options.readData) !== false) {\n          file.data = yield _this.getDataFromFile(pickedFile);\n        }\n        result.files.push(file);\n      }\n      return result;\n    })();\n  }\n  openFilePicker(options) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      var _a;\n      const accept = ((_a = options === null || options === void 0 ? void 0 : options.types) === null || _a === void 0 ? void 0 : _a.join(',')) || '';\n      const multiple = !!(options === null || options === void 0 ? void 0 : options.multiple);\n      return new Promise(resolve => {\n        let onChangeFired = false;\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.accept = accept;\n        input.multiple = multiple;\n        input.addEventListener('change', () => {\n          onChangeFired = true;\n          const files = Array.from(input.files || []);\n          resolve(files);\n        }, {\n          once: true\n        });\n        // Workaround to detect when Cancel is selected in the File Selection dialog box.\n        window.addEventListener('focus', /*#__PURE__*/_asyncToGenerator(function* () {\n          yield _this2.wait(1000);\n          if (onChangeFired) {\n            return;\n          }\n          resolve(undefined);\n        }), {\n          once: true\n        });\n        input.click();\n      });\n    })();\n  }\n  getDataFromFile(file) {\n    return _asyncToGenerator(function* () {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => {\n          const result = typeof reader.result === 'string' ? reader.result : '';\n          const splittedResult = result.split('base64,');\n          const base64 = splittedResult[1] || '';\n          resolve(base64);\n        };\n        reader.onerror = error => {\n          reject(error);\n        };\n      });\n    })();\n  }\n  getNameFromUrl(file) {\n    return file.name;\n  }\n  getMimeTypeFromUrl(file) {\n    return file.type;\n  }\n  getSizeFromUrl(file) {\n    return file.size;\n  }\n  wait(delayMs) {\n    return _asyncToGenerator(function* () {\n      return new Promise(resolve => setTimeout(resolve, delayMs));\n    })();\n  }\n}","map":{"version":3,"names":["WebPlugin","FilePickerWeb","constructor","arguments","ERROR_PICK_FILE_CANCELED","pickFiles","options","pickedFiles","openFilePicker","Error","result","files","pickedFile","file","path","undefined","name","getNameFromUrl","mimeType","getMimeTypeFromUrl","size","getSizeFromUrl","blob","readData","data","getDataFromFile","push","_a","accept","types","join","multiple","Promise","resolve","onChangeFired","input","document","createElement","type","addEventListener","Array","from","once","window","wait","click","reject","reader","FileReader","readAsDataURL","onload","splittedResult","split","base64","onerror","error","delayMs","setTimeout"],"sources":["/home/digifemmes-22lab149/Bureau/soutramoi_app/node_modules/@robingenz/capacitor-file-picker/dist/esm/web.js"],"sourcesContent":["import { WebPlugin } from '@capacitor/core';\r\nexport class FilePickerWeb extends WebPlugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.ERROR_PICK_FILE_CANCELED = 'pickFiles canceled.';\r\n    }\r\n    async pickFiles(options) {\r\n        const pickedFiles = await this.openFilePicker(options);\r\n        if (!pickedFiles) {\r\n            throw new Error(this.ERROR_PICK_FILE_CANCELED);\r\n        }\r\n        const result = {\r\n            files: [],\r\n        };\r\n        for (const pickedFile of pickedFiles) {\r\n            const file = {\r\n                path: undefined,\r\n                name: this.getNameFromUrl(pickedFile),\r\n                mimeType: this.getMimeTypeFromUrl(pickedFile),\r\n                size: this.getSizeFromUrl(pickedFile),\r\n                blob: pickedFile,\r\n            };\r\n            if ((options === null || options === void 0 ? void 0 : options.readData) !== false) {\r\n                file.data = await this.getDataFromFile(pickedFile);\r\n            }\r\n            result.files.push(file);\r\n        }\r\n        return result;\r\n    }\r\n    async openFilePicker(options) {\r\n        var _a;\r\n        const accept = ((_a = options === null || options === void 0 ? void 0 : options.types) === null || _a === void 0 ? void 0 : _a.join(',')) || '';\r\n        const multiple = !!(options === null || options === void 0 ? void 0 : options.multiple);\r\n        return new Promise(resolve => {\r\n            let onChangeFired = false;\r\n            const input = document.createElement('input');\r\n            input.type = 'file';\r\n            input.accept = accept;\r\n            input.multiple = multiple;\r\n            input.addEventListener('change', () => {\r\n                onChangeFired = true;\r\n                const files = Array.from(input.files || []);\r\n                resolve(files);\r\n            }, { once: true });\r\n            // Workaround to detect when Cancel is selected in the File Selection dialog box.\r\n            window.addEventListener('focus', async () => {\r\n                await this.wait(1000);\r\n                if (onChangeFired) {\r\n                    return;\r\n                }\r\n                resolve(undefined);\r\n            }, { once: true });\r\n            input.click();\r\n        });\r\n    }\r\n    async getDataFromFile(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => {\r\n                const result = typeof reader.result === 'string' ? reader.result : '';\r\n                const splittedResult = result.split('base64,');\r\n                const base64 = splittedResult[1] || '';\r\n                resolve(base64);\r\n            };\r\n            reader.onerror = error => {\r\n                reject(error);\r\n            };\r\n        });\r\n    }\r\n    getNameFromUrl(file) {\r\n        return file.name;\r\n    }\r\n    getMimeTypeFromUrl(file) {\r\n        return file.type;\r\n    }\r\n    getSizeFromUrl(file) {\r\n        return file.size;\r\n    }\r\n    async wait(delayMs) {\r\n        return new Promise(resolve => setTimeout(resolve, delayMs));\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}