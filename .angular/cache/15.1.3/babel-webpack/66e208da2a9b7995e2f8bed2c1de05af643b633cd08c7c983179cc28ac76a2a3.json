{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Platform } from '@ionic/angular';\nimport { StorageService } from '../services/storage.service';\nlet InitGuard = class InitGuard {\n  constructor(router, platform, storage) {\n    this.router = router;\n    this.platform = platform;\n    this.storage = storage;\n  }\n  canActivate(route, state) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const isNative = this.platform.is('hybrid');\n      if (isNative) {\n        const intro = yield this.storage.get('soutramoi_intro');\n        if (intro) {\n          return true;\n        }\n        this.router.navigate(['/onboarding'], {\n          skipLocationChange: true\n        });\n        return false;\n      } else {\n        return true;\n      }\n    });\n  }\n};\nInitGuard.ctorParameters = () => [{\n  type: Router\n}, {\n  type: Platform\n}, {\n  type: StorageService\n}];\nInitGuard = __decorate([Injectable({\n  providedIn: 'root'\n})], InitGuard);\nexport { InitGuard };","map":{"version":3,"mappings":";AAAA,SAASA,UAAU,QAAQ,eAAe;AAC1C,SAA8CC,MAAM,QAA6B,iBAAiB;AAClG,SAASC,QAAQ,QAAQ,gBAAgB;AAEzC,SAASC,cAAc,QAAQ,6BAA6B;AAKrD,IAAMC,SAAS,GAAf,MAAMA,SAAS;EACpBC,YACUC,MAAc,EACdC,QAAkB,EAClBC,OAAuB;IAFvB,WAAM,GAANF,MAAM;IACN,aAAQ,GAARC,QAAQ;IACR,YAAO,GAAPC,OAAO;EACb;EAEEC,WAAW,CAACC,KAA6B,EAAEC,KAA0B;;MACzE,MAAMC,QAAQ,GAAG,IAAI,CAACL,QAAQ,CAACM,EAAE,CAAC,QAAQ,CAAC;MAE3C,IAAID,QAAQ,EAAE;QACZ,MAAME,KAAK,GAAiB,MAAM,IAAI,CAACN,OAAO,CAACO,GAAG,CAAC,iBAAiB,CAAC;QAErE,IAAID,KAAK,EAAE;UACT,OAAO,IAAI;;QAGb,IAAI,CAACR,MAAM,CAACU,QAAQ,CAAC,CAAC,aAAa,CAAC,EAAE;UAAEC,kBAAkB,EAAE;QAAI,CAAE,CAAC;QAEnE,OAAO,KAAK;OACb,MAAM;QACL,OAAO,IAAI;;IAEf,CAAC;;;;;;;;;;AAvBUb,SAAS,eAHrBJ,UAAU,CAAC;EACVkB,UAAU,EAAE;CACb,CAAC,GACWd,SAAS,CAwBrB;SAxBYA,SAAS","names":["Injectable","Router","Platform","StorageService","InitGuard","constructor","router","platform","storage","canActivate","route","state","isNative","is","intro","get","navigate","skipLocationChange","providedIn"],"sourceRoot":"","sources":["/home/digifemmes-22lab149/Bureau/soutramoi_app/src/app/guards/init.guard.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { Platform } from '@ionic/angular';\n\nimport { StorageService } from '../services/storage.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class InitGuard implements CanActivate {\n  constructor(\n    private router: Router,\n    private platform: Platform,\n    private storage: StorageService,\n  ) { }\n\n  async canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    const isNative = this.platform.is('hybrid');\n\n    if (isNative) {\n      const intro: IntroPayload = await this.storage.get('soutramoi_intro');\n\n      if (intro) {\n        return true;\n      }\n\n      this.router.navigate(['/onboarding'], { skipLocationChange: true });\n\n      return false;\n    } else {\n      return true;\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}