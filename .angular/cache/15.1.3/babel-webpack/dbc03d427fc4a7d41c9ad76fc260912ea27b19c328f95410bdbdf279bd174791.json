{"ast":null,"code":"import _asyncToGenerator from \"/home/digifemmes-22lab149/Bureau/soutramoi_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { WebPlugin } from '@capacitor/core';\nimport * as $script from 'scriptjs';\nexport class SignInWithAppleWeb extends WebPlugin {\n  constructor() {\n    super({\n      name: 'SignInWithApple',\n      platforms: ['web']\n    });\n    this.appleScriptUrl = 'https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js';\n    this.isAppleScriptLoaded = false;\n  }\n  authorize(options) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      return new Promise((resolve, reject) => {\n        if (options) {\n          _this.loadSignInWithAppleJS().then(loaded => {\n            var _a, _b, _c;\n            _this.isAppleScriptLoaded = loaded;\n            if (_this.isAppleScriptLoaded) {\n              AppleID.auth.init({\n                clientId: options.clientId,\n                redirectURI: options.redirectURI,\n                scope: (_a = options.scopes) !== null && _a !== void 0 ? _a : undefined,\n                state: (_b = options.state) !== null && _b !== void 0 ? _b : undefined,\n                nonce: (_c = options.nonce) !== null && _c !== void 0 ? _c : undefined,\n                usePopup: true\n              });\n              AppleID.auth.signIn().then(res => {\n                var _a, _b, _c, _d, _e;\n                const response = {\n                  response: {\n                    user: null,\n                    email: (_a = res.user) === null || _a === void 0 ? void 0 : _a.email,\n                    givenName: (_c = (_b = res.user) === null || _b === void 0 ? void 0 : _b.name) === null || _c === void 0 ? void 0 : _c.firstName,\n                    familyName: (_e = (_d = res.user) === null || _d === void 0 ? void 0 : _d.name) === null || _e === void 0 ? void 0 : _e.lastName,\n                    identityToken: res.authorization.id_token,\n                    authorizationCode: res.authorization.code\n                  }\n                };\n                resolve(response);\n              }).catch(err => {\n                reject(err);\n              });\n            } else {\n              reject('Unable to load Sign in with Apple JS framework.');\n            }\n          });\n        } else {\n          reject('No options were provided.');\n        }\n      });\n    })();\n  }\n  loadSignInWithAppleJS() {\n    return new Promise(resolve => {\n      if (!this.isAppleScriptLoaded) {\n        if (typeof window !== undefined) {\n          $script.get(this.appleScriptUrl, () => resolve(true));\n        } else {\n          resolve(false);\n        }\n      } else {\n        resolve(true);\n      }\n    });\n  }\n}","map":{"version":3,"names":["WebPlugin","$script","SignInWithAppleWeb","constructor","name","platforms","appleScriptUrl","isAppleScriptLoaded","authorize","options","Promise","resolve","reject","loadSignInWithAppleJS","then","loaded","_a","_b","_c","AppleID","auth","init","clientId","redirectURI","scope","scopes","undefined","state","nonce","usePopup","signIn","res","_d","_e","response","user","email","givenName","firstName","familyName","lastName","identityToken","authorization","id_token","authorizationCode","code","catch","err","window","get"],"sources":["/home/digifemmes-22lab149/Bureau/soutramoi_app/node_modules/@capacitor-community/apple-sign-in/dist/esm/web.js"],"sourcesContent":["import { WebPlugin } from '@capacitor/core';\nimport * as $script from 'scriptjs';\nexport class SignInWithAppleWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: 'SignInWithApple',\n            platforms: ['web'],\n        });\n        this.appleScriptUrl = 'https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js';\n        this.isAppleScriptLoaded = false;\n    }\n    async authorize(options) {\n        return new Promise((resolve, reject) => {\n            if (options) {\n                this.loadSignInWithAppleJS().then(loaded => {\n                    var _a, _b, _c;\n                    this.isAppleScriptLoaded = loaded;\n                    if (this.isAppleScriptLoaded) {\n                        AppleID.auth.init({\n                            clientId: options.clientId,\n                            redirectURI: options.redirectURI,\n                            scope: (_a = options.scopes) !== null && _a !== void 0 ? _a : undefined,\n                            state: (_b = options.state) !== null && _b !== void 0 ? _b : undefined,\n                            nonce: (_c = options.nonce) !== null && _c !== void 0 ? _c : undefined,\n                            usePopup: true,\n                        });\n                        AppleID.auth\n                            .signIn()\n                            .then((res) => {\n                            var _a, _b, _c, _d, _e;\n                            const response = {\n                                response: {\n                                    user: null,\n                                    email: (_a = res.user) === null || _a === void 0 ? void 0 : _a.email,\n                                    givenName: (_c = (_b = res.user) === null || _b === void 0 ? void 0 : _b.name) === null || _c === void 0 ? void 0 : _c.firstName,\n                                    familyName: (_e = (_d = res.user) === null || _d === void 0 ? void 0 : _d.name) === null || _e === void 0 ? void 0 : _e.lastName,\n                                    identityToken: res.authorization.id_token,\n                                    authorizationCode: res.authorization.code,\n                                },\n                            };\n                            resolve(response);\n                        })\n                            .catch((err) => {\n                            reject(err);\n                        });\n                    }\n                    else {\n                        reject('Unable to load Sign in with Apple JS framework.');\n                    }\n                });\n            }\n            else {\n                reject('No options were provided.');\n            }\n        });\n    }\n    loadSignInWithAppleJS() {\n        return new Promise(resolve => {\n            if (!this.isAppleScriptLoaded) {\n                if (typeof window !== undefined) {\n                    $script.get(this.appleScriptUrl, () => resolve(true));\n                }\n                else {\n                    resolve(false);\n                }\n            }\n            else {\n                resolve(true);\n            }\n        });\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}